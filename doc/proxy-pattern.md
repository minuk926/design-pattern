## **Proxy Pattern**

https://blogshine.tistory.com/17

í”„ë¡ì‹œ íŒ¨í„´(Proxy Pattern)ì€ ëŒ€ìƒ ì›ë³¸ ê°ì²´ë¥¼ ëŒ€ë¦¬í•˜ì—¬ ëŒ€ì‹  ì²˜ë¦¬í•˜ê²Œ í•¨ìœ¼ë¡œì¨ ë¡œì§ì˜ íë¦„ì„ ì œì–´í•˜ëŠ” í–‰ë™ íŒ¨í„´ì´ë‹¤.

í”„ë¡ì‹œ(Proxy)ì˜ ì‚¬ì „ì ì¸ ì˜ë¯¸ëŠ” 'ëŒ€ë¦¬ì¸'ì´ë¼ëŠ” ëœ»ì´ë‹¤. ì¦‰, ëˆ„êµ°ê°€ì—ê²Œ ì–´ë–¤ ì¼ì„ ëŒ€ì‹  ì‹œí‚¤ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ëŠ”ë°, ì´ë¥¼ ê°ì²´ ì§€í–¥ í”„ë¡œê·¸ë˜ë°ì— ì ‘ëª©í•´ë³´ë©´ í´ë¼ì´ì–¸íŠ¸ê°€ ëŒ€ìƒ ê°ì²´ë¥¼ ì§ì ‘ ì“°ëŠ”ê²Œ ì•„ë‹ˆë¼ ì¤‘ê°„ì— í”„ë¡ì‹œ(ëŒ€ë¦¬ì¸)ì„ ê±°ì³ì„œ ì“°ëŠ” ì½”ë“œ íŒ¨í„´ì´ë¼ê³  ë³´ë©´ ëœë‹¤. ë”°ë¼ì„œ ëŒ€ìƒ ê°ì²´(Subject)ì˜ ë©”ì†Œë“œë¥¼ ì§ì ‘ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, ëŒ€ìƒ ê°ì²´ì— ì ‘ê·¼í•˜ê¸° ì „ì— í”„ë¡ì‹œ(Proxy) ê°ì²´ì˜ ë©”ì„œë“œë¥¼ ì ‘ê·¼í•œ í›„ ì¶”ê°€ì ì¸ ë¡œì§ì„ ì²˜ë¦¬í•œë’¤ ì ‘ê·¼í•˜ê²Œ ëœë‹¤.

[![Proxy-Pattern](img/proxy-pattern.png)](img/proxy-pattern.png)

ê·¸ëƒ¥ ê°ì²´ë¥¼ ì´ìš©í•˜ë©´ ë˜ì§€, ì´ë ‡ê²Œ ë²ˆê±°ë¡­ê²Œ ì¤‘ê³„ ëŒ€ë¦¬ìë¥¼ í†µí•´ ì´ìš©í•˜ëŠ” ë°©ì‹ì„ ì·¨í•˜ëŠ” ì´ìœ ëŠ”, ëŒ€ìƒ í´ë˜ìŠ¤ê°€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆê±°ë‚˜ ì¸ìŠ¤í„´ìŠ¤í™” í•˜ê¸°ì— ë¬´ê²ê±°ë‚˜ ì¶”ê°€ ê¸°ëŠ¥ì„ ê°€ë¯¸í•˜ê³  ì‹¶ì€ë°, ì›ë³¸ ê°ì²´ë¥¼ ìˆ˜ì •í• ìˆ˜ ì—†ëŠ” ìƒí™©ì¼ ë•Œë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ì„œ ì´ë‹¤. ëŒ€ì²´ì ìœ¼ë¡œ ì •ë¦¬í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ì€ íš¨ê³¼ë¥¼ ëˆ„ë¦´ìˆ˜ ìˆë‹¤ê³  ë³´ë©´ ëœë‹¤.

1. **ë³´ì•ˆ(Security)** : í”„ë¡ì‹œëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ê²€ì‚¬ ê²°ê³¼ê°€ ê¸ì •ì ì¸ ê²½ìš°ì—ë§Œ ìš”ì²­ì„ ëŒ€ìƒìœ¼ë¡œ ì „ë‹¬í•œë‹¤.
2. **ìºì‹±(Caching)** : í”„ë¡ì‹œê°€ ë‚´ë¶€ ìºì‹œë¥¼ ìœ ì§€í•˜ì—¬ ë°ì´í„°ê°€ ìºì‹œì— ì•„ì§ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ë§Œ ëŒ€ìƒì—ì„œ ì‘ì—…ì´ ì‹¤í–‰ë˜ë„ë¡ í•œë‹¤.
3. **ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬(Data validation)** : í”„ë¡ì‹œê°€ ì…ë ¥ì„ ëŒ€ìƒìœ¼ë¡œ ì „ë‹¬í•˜ê¸° ì „ì— ìœ íš¨ì„±ì„ ê²€ì‚¬í•œë‹¤.
4. **ì§€ì—° ì´ˆê¸°í™”(Lazy initialization)** : ëŒ€ìƒì˜ ìƒì„± ë¹„ìš©ì´ ë¹„ì‹¸ë‹¤ë©´ í”„ë¡ì‹œëŠ” ê·¸ê²ƒì„ í•„ìš”ë¡œ í• ë•Œê¹Œì§€ ì—°ê¸°í•  ìˆ˜ ìˆë‹¤.
5. **ë¡œê¹…(Logging)** : í”„ë¡ì‹œëŠ” ë©”ì†Œë“œ í˜¸ì¶œê³¼ ìƒëŒ€ ë§¤ê°œ ë³€ìˆ˜ë¥¼ ì¸í„°ì…‰íŠ¸í•˜ê³  ì´ë¥¼ ê¸°ë¡í•œë‹¤.
6. **ì›ê²© ê°ì²´(Remote objects)** : í”„ë¡ì‹œëŠ” ì›ê²© ìœ„ì¹˜ì— ìˆëŠ” ê°ì²´ë¥¼ ê°€ì ¸ì™€ì„œ ë¡œì»¬ì²˜ëŸ¼ ë³´ì´ê²Œ í•  ìˆ˜ ìˆë‹¤.

---

### **í”„ë¡ì‹œ íŒ¨í„´ êµ¬ì¡°**

í”„ë¡ì‹œëŠ” ë‹¤ë¥¸ ê°ì²´ì— ëŒ€í•œ ì ‘ê·¼ì„ ì œì–´í•˜ëŠ” ê°œì²´ì´ë‹¤. ì—¬ê¸°ì„œ ë‹¤ë¥¸ ê°ì²´ë¥¼ **ëŒ€ìƒ(Subject)**ë¼ê³  ë¶€ë¥¸ë‹¤. í”„ë¡ì‹œì™€ ëŒ€ìƒì€ ë™ì¼í•œ ì¸í„°í˜ì´ìŠ¤ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©° ì´ë¥¼ í†µí•´ ë‹¤ë¥¸ ì¸í„°í˜ì´ìŠ¤ì™€ ì™„ì „íˆ í˜¸í™˜ë˜ë„ë¡ ë°”ê¿€ìˆ˜ ìˆë‹¤.

[![Proxy-Pattern](img/proxy-pattern2.png)](img/proxy-pattern2.png)

- **Subject** : Proxyì™€ RealSubjectë¥¼ í•˜ë‚˜ë¡œ ë¬¶ëŠ” ì¸í„°í˜ì´ìŠ¤ (ë‹¤í˜•ì„±)

    - ëŒ€ìƒ ê°ì²´ì™€ í”„ë¡ì‹œ ì—­í• ì„ ë™ì¼í•˜ê²Œ í•˜ëŠ” ì¶”ìƒ ë©”ì†Œë“œ ~~operation()~~ ë¥¼ ì •ì˜í•œë‹¤.
    - ì¸í„°í˜ì´ìŠ¤ê°€ ìˆê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ëŠ” Proxy ì—­í• ê³¼ RealSubject ì—­í• ì˜ ì°¨ì´ë¥¼ ì˜ì‹í•  í•„ìš”ê°€ ì—†ë‹¤.

- **RealSubject** : ì›ë³¸ ëŒ€ìƒ ê°ì²´
- **Proxy** : ëŒ€ìƒ ê°ì²´(RealSubject)ë¥¼ ì¤‘ê³„í•  ëŒ€ë¦¬ì ì—­í• 

    - í”„ë¡ì‹œëŠ” ëŒ€ìƒ ê°ì²´ë¥¼ í•©ì„±(composition)í•œë‹¤.
    - í”„ë¡ì‹œëŠ” ëŒ€ìƒ ê°ì²´ì™€ ê°™ì€ ì´ë¦„ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ë©°, ë³„ë„ì˜ ë¡œì§ì„ ìˆ˜í–‰ í• ìˆ˜ ìˆë‹¤ (ì¸í„°í˜ì´ìŠ¤ êµ¬í˜„ ë©”ì†Œë“œ)
    - í”„ë¡ì‹œëŠ” íë¦„ì œì–´ë§Œ í•  ë¿ ê²°ê³¼ê°’ì„ ì¡°ì‘í•˜ê±°ë‚˜ ë³€ê²½ì‹œí‚¤ë©´ ì•ˆ ëœë‹¤.

- **Client** : Subject ì¸í„°í˜ì´ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•´ ì´ìš©.

    - í´ë¼ì´ì–¸íŠ¸ëŠ” í”„ë¡ì‹œë¥¼ ì¤‘ê°„ì— ë‘ê³  í”„ë¡ì‹œë¥¼ í†µí•´ì„œ RealSubjectì™€ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ”ë‹¤.


---

### **í”„ë¡ì‹œ íŒ¨í„´ ì¢…ë¥˜**

Proxy íŒ¨í„´ì€ ë‹¨ìˆœí•˜ë©´ì„œë„ ìì£¼ ì“°ì´ëŠ” íŒ¨í„´ì´ë©°, ê·¸ í™œìš© ë°©ì‹ë„ ë‹¤ì–‘í•˜ë‹¤. ê°™ì€ í”„ë¡ì‹œ ê°ì²´ë¼ë„ ì–´ë– í•œ ë¡œì§ì„ ì§œëŠëƒì— ë”°ë¼ ê·¸ í™œìš©ë„ëŠ” ì²œì°¨ë§Œë³„ì´ ëœë‹¤. Proxy íŒ¨í„´ì˜ ê¸°ë³¸í˜•ì„ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ë³€í˜•í•˜ëŠëƒì— ë”°ë¼ í”„ë¡ì‹œ ì¢…ë¥˜ê°€ ë‚˜ë‰˜ì–´ì§€ê²Œ ëœë‹¤.

#### **ê¸°ë³¸í˜• í”„ë¡ì‹œ **(Normal Proxy)****

```java
interface ISubject {
    void action();
}

class RealSubject implements ISubject {
    public void action() {
        System.out.println("ì›ë³¸ ê°ì²´ ì•¡ì…˜ !!");
    }
}
```

```java
class Proxy implements ISubject {
    private RealSubject subject; // ëŒ€ìƒ ê°ì²´ë¥¼ composition

    Proxy(RealSubject subject) {
        this.subject = subject;
    }

    public void action() {
        subject.action(); // ìœ„ì„
        /* do something */
        System.out.println("í”„ë¡ì‹œ ê°ì²´ ì•¡ì…˜ !!");
    }
}

class Client {
    public static void main(String[] args) {
        ISubject sub = new Proxy(new RealSubject());
        sub.action();
    }
}
```

[![Proxy-Pattern](img/proxy-pattern-print.png)](img/proxy-pattern-print.png)

#### **ê°€ìƒ í”„ë¡ì‹œ **(****Virtual**** Proxy)****

- ì§€ì—° ì´ˆê¸°í™” ë°©ì‹
- ê°€ë” í•„ìš”í•˜ì§€ë§Œ í•­ìƒ ë©”ëª¨ë¦¬ì— ì ì¬ë˜ì–´ ìˆëŠ” ë¬´ê±°ìš´ ì„œë¹„ìŠ¤ ê°ì²´ê°€ ìˆëŠ” ê²½ìš°
- ì´ êµ¬í˜„ì€ ì‹¤ì œ ê°ì²´ì˜ ìƒì„±ì— ë§ì€ ìì›ì´ ì†Œëª¨ ë˜ì§€ë§Œ ì‚¬ìš© ë¹ˆë„ëŠ” ë‚®ì„ ë•Œ ì“°ëŠ” ë°©ì‹ì´ë‹¤.
- ì„œë¹„ìŠ¤ê°€ ì‹œì‘ë  ë•Œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ëŒ€ì‹ ì— ê°ì²´ ì´ˆê¸°í™”ê°€ ì‹¤ì œë¡œ í•„ìš”í•œ ì‹œì ì— ì´ˆê¸°í™”ë ìˆ˜ ìˆë„ë¡ ì§€ì—°í•  ìˆ˜ ìˆë‹¤.

```java
class Proxy implements ISubject {
    private RealSubject subject; // ëŒ€ìƒ ê°ì²´ë¥¼ composition

    Proxy() {
    }

    public void action() {
    	// í”„ë¡ì‹œ ê°ì²´ëŠ” ì‹¤ì œ ìš”ì²­(action(ë©”ì†Œë“œ í˜¸ì¶œ)ì´ ë“¤ì–´ ì™”ì„ ë•Œ ì‹¤ì œ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.
        if(subject == null){
            subject = new RealSubject();
        }
        subject.action(); // ìœ„ì„
        /* do something */
        System.out.println("í”„ë¡ì‹œ ê°ì²´ ì•¡ì…˜ !!");
    }
}

class Client {
    public static void main(String[] args) {
        ISubject sub = new Proxy();
        sub.action();
    }
}
```

#### **ë³´í˜¸ í”„ë¡ì‹œ (Protection Proxy)**

- í”„ë¡ì‹œê°€ ëŒ€ìƒ ê°ì²´ì— ëŒ€í•œ ìì›ìœ¼ë¡œì˜ ì—‘ì„¸ìŠ¤ ì œì–´(ì ‘ê·¼ ê¶Œí•œ)
- íŠ¹ì • í´ë¼ì´ì–¸íŠ¸ë§Œ ì„œë¹„ìŠ¤ ê°ì²´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²½ìš°
- í”„ë¡ì‹œ ê°ì²´ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì˜ ìê²© ì¦ëª…ì´ ê¸°ì¤€ê³¼ ì¼ì¹˜í•˜ëŠ” ê²½ìš°ì—ë§Œ ì„œë¹„ìŠ¤ ê°ì²´ì— ìš”ì²­ì„ ì „ë‹¬í•  ìˆ˜ ìˆê²Œ í•œë‹¤.

```java
class Proxy implements ISubject {
    private RealSubject subject; // ëŒ€ìƒ ê°ì²´ë¥¼ composition
    boolean access; // ì ‘ê·¼ ê¶Œí•œ

    Proxy(RealSubject subject, boolean access) {
        this.subject = subject;
        this.access = access;
    }

    public void action() {
        if(access) {
            subject.action(); // ìœ„ì„
            /* do something */
            System.out.println("í”„ë¡ì‹œ ê°ì²´ ì•¡ì…˜ !!");
        }
    }
}

class Client {
    public static void main(String[] args) {
        ISubject sub = new Proxy(new RealSubject(), false);
        sub.action();
    }
}
```

#### **ë¡œê¹… í”„ë¡ì‹œ (Logging Proxy)**

- ëŒ€ìƒ ê°ì²´ì— ëŒ€í•œ ë¡œê¹…ì„ ì¶”ê°€í•˜ë ¤ëŠ” ê²½ìš°
- í”„ë¡ì‹œëŠ” ì„œë¹„ìŠ¤ ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ê¸° ì „ë‹¬í•˜ê¸° ì „ì— ë¡œê¹…ì„ í•˜ëŠ” ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ì—¬ ì¬ì •ì˜í•œë‹¤.

```java
class Proxy implements ISubject {
    private RealSubject subject; // ëŒ€ìƒ ê°ì²´ë¥¼ composition

    Proxy(RealSubject subject {
        this.subject = subject;
    }

    public void action() {
        System.out.println("ë¡œê¹…..................");
        
        subject.action(); // ìœ„ì„
        /* do something */
        System.out.println("í”„ë¡ì‹œ ê°ì²´ ì•¡ì…˜ !!");

        System.out.println("ë¡œê¹…..................");
    }
}

class Client {
    public static void main(String[] args) {
        ISubject sub = new Proxy(new RealSubject());
        sub.action();
    }
}
```

#### **ì›ê²© í”„ë¡ì‹œ **(Remote Proxy)****

- í”„ë¡ì‹œ í´ë˜ìŠ¤ëŠ” ë¡œì»¬ì— ìˆê³ , ëŒ€ìƒ ê°ì²´ëŠ” ì›ê²© ì„œë²„ì— ì¡´ì¬í•˜ëŠ” ê²½ìš°
- í”„ë¡ì‹œ ê°ì²´ëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ì „ë‹¬í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ì™€ ê´€ë ¨ëœ ë¶ˆí•„ìš”í•œ ì‘ì—…ë“¤ì„ ì²˜ë¦¬í•˜ê³  ê²°ê³¼ê°’ë§Œ ë°˜í™˜
- í´ë¼ì´ì–¸íŠ¸ ì…ì¥ì—ì„  í”„ë¡ì‹œë¥¼ í†µí•´ ê°ì²´ë¥¼ ì´ìš©í•˜ëŠ” ê²ƒì´ë‹ˆ ì›ê²©ì´ë“  ë¡œì»¬ì´ë“  ì‹ ê²½ ì“¸ í•„ìš”ê°€ ì—†ìœ¼ë©°, í”„ë¡ì‹œëŠ” ì§„ì§œ ê°ì²´ì™€ í†µì‹ ì„ ëŒ€ë¦¬í•˜ê²Œ ëœë‹¤.

[![Proxy-Pattern](img/remote-proxy-pattern.png)](img/remote-proxy-pattern.png)

> Tip
>
> ì°¸ê³ ë¡œ í”„ë¡ì‹œë¥¼ ìŠ¤í„°ë¸Œë¼ê³ ë„ ë¶€ë¥´ë©°, í”„ë¡ì‹œë¡œë¶€í„° ì „ë‹¬ëœ ëª…ë ¹ì„ ì´í•´í•˜ê³  ì í•©í•œ ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ” ë³´ì¡°ê°ì²´ë¥¼ ìŠ¤ì¼ˆë ˆí†¤ì´ë¼ í•œë‹¤.

#### **ìºì‹± í”„ë¡ì‹œ (Caching Proxy)**

- ë°ì´í„°ê°€ í° ê²½ìš° ìºì‹±í•˜ì—¬ ì¬ì‚¬ìš©ì„ ìœ ë„
- í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì˜ ê²°ê³¼ë¥¼ ìºì‹œí•˜ê³  ì´ ìºì‹œì˜ ìˆ˜ëª… ì£¼ê¸°ë¥¼ ê´€ë¦¬
>
> Info
>
> **[ HTTP Proxy ]**
>
> HTTP ProxyëŠ” ì›¹ì„œë²„ì™€ ë¸Œë¼ìš°ì € ì‚¬ì´ì—ì„œ ì›¹ í˜ì´ì§€ì˜ ìºì‹±ì„ ì‹¤í–‰í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ì´ë‹¤. ì›¹ ë¸Œë¼ìš°ì €ê°€ ì–´ë–¤ ì›¹ í˜ì´ì§€ë¥¼ í‘œì‹œí•  ë•Œ ì§ì ‘ ì›¹ ì„œë²„ì—ì„œ ê·¸ í˜ì´ì§€ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ì•„ë‹ˆê³ , HTTP Proxyê°€ ìºì‰¬í•´ì„œ ì–´ë–¤ í˜ì´ì§€ë¥¼ ëŒ€ì‹ í•´ì„œ ì·¨ë“í•œë‹¤. ë§Œì¼ ìµœì‹  ì •ë³´ê°€ í•„ìš”í•˜ê±°ë‚˜ í˜ì´ì§€ì˜ ìœ íš¨ê¸°ê°„ì´ ì§€ë‚¬ì„ ë•Œ ì›¹ ì„œë²„ì— ì›¹ í˜ì´ì§€ë¥¼ ê°€ì§€ëŸ¬ ê°„ë‹¤.   
> ì´ë¥¼ íŒ¨í„´ìœ¼ë¡œ ë”°ì ¸ë³´ë©´, ì›¹ ë¸Œë¼ìš°ì €ê°€ Client ì—­í• , HTTP Proxyê°€ Proxy ì—­í• , ê·¸ë¦¬ê³  ì›¹ ì„œë²„ê°€ RealSubcjet ì—­í• ì„ í•œë‹¤ê³  ë³´ë©´ ëœë‹¤.
>
> ![https://blog.naver.com/hai0416/221629819476](img/http-proxy-img.png)

---

### **í”„ë¡ì‹œ íŒ¨í„´ íŠ¹ì§•**

#### **íŒ¨í„´ ì‚¬ìš© ì‹œê¸°**

- ì ‘ê·¼ì„ ì œì–´í•˜ê±°ê°€ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê³  ì‹¶ì€ë°, ê¸°ì¡´ì˜ íŠ¹ì • ê°ì²´ë¥¼ ìˆ˜ì •í•  ìˆ˜ ì—†ëŠ” ìƒí™©ì¼ë•Œ
- ì´ˆê¸°í™” ì§€ì—°, ì ‘ê·¼ ì œì–´, ë¡œê¹…, ìºì‹± ë“±, ê¸°ì¡´ ê°ì²´ ë™ì‘ì— ìˆ˜ì • ì—†ì´ ê°€ë¯¸í•˜ê³  ì‹¶ì„ ë•Œ

#### **íŒ¨í„´ ì¥ì **

- [ê°œë°© íì‡„ ì›ì¹™(OCP)Visit Website](https://inpa.tistory.com/entry/OOP-%F0%9F%92%A0-%EC%95%84%EC%A3%BC-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94-OCP-%EA%B0%9C%EB%B0%A9-%ED%8F%90%EC%87%84-%EC%9B%90%EC%B9%99) ì¤€ìˆ˜

    - ê¸°ì¡´ ëŒ€ìƒ ê°ì²´ì˜ ì½”ë“œë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

- [ë‹¨ì¼ ì±…ì„ ì›ì¹™(SRP)Visit Website](https://inpa.tistory.com/entry/OOP-%F0%9F%92%A0-%EC%95%84%EC%A3%BC-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EB%8A%94-SRP-%EB%8B%A8%EC%9D%BC-%EC%B1%85%EC%9E%84-%EC%9B%90%EC%B9%99) ì¤€ìˆ˜ 
    
    - ëŒ€ìƒ ê°ì²´ëŠ” ìì‹ ì˜ ê¸°ëŠ¥ì—ë§Œ ì§‘ì¤‘ í•˜ê³ , ê·¸ ì´ì™¸ ë¶€ê°€ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” ì—­í• ì„ í”„ë¡ì‹œ ê°ì²´ì— ìœ„ì„í•˜ì—¬ ë‹¤ì¤‘ ì±…ì„ì„ íšŒí”¼ í•  ìˆ˜ ìˆë‹¤.

- ì›ë˜ í•˜ë ¤ë˜ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ë©° ê·¸ì™¸ì˜ ë¶€ê°€ì ì¸ ì‘ì—…(ë¡œê¹…, ì¸ì¦, ë„¤íŠ¸ì›Œí¬ í†µì‹  ë“±)ì„ ìˆ˜í–‰í•˜ëŠ”ë° ìœ ìš©í•˜ë‹¤
- í´ë¼ì´ì–¸íŠ¸ëŠ” ê°ì²´ë¥¼ ì‹ ê²½ì“°ì§€ ì•Šê³ , ì„œë¹„ìŠ¤ ê°ì²´ë¥¼ ì œì–´í•˜ê±°ë‚˜ ìƒëª… ì£¼ê¸°ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤.
- ì‚¬ìš©ì ì…ì¥ì—ì„œëŠ” í”„ë¡ì‹œ ê°ì²´ë‚˜ ì‹¤ì œ ê°ì²´ë‚˜ ì‚¬ìš©ë²•ì€ ìœ ì‚¬í•˜ë¯€ë¡œ ì‚¬ìš©ì„±ì— ë¬¸ì œ ë˜ì§€ ì•ŠëŠ”ë‹¤.

#### **íŒ¨í„´ ë‹¨ì **

- ë§ì€ í”„ë¡ì‹œ í´ë˜ìŠ¤ë¥¼ ë„ì…í•´ì•¼ í•˜ë¯€ë¡œ ì½”ë“œì˜ ë³µì¡ë„ê°€ ì¦ê°€í•œë‹¤.

    - ì˜ˆë¥¼ë“¤ì–´ ì—¬ëŸ¬ í´ë˜ìŠ¤ì— ë¡œê¹… ê¸°ëŠ¥ì„ ê°€ë¯¸ ì‹œí‚¤ê³  ì‹¶ë‹¤ë©´, ë™ì¼í•œ ì½”ë“œë¥¼ ì ìš©í•¨ì—ë„ ê°ê°ì˜ í´ë˜ìŠ¤ì— í•´ë‹¹ë˜ëŠ” í”„ë¡ì‹œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ ì ìš©í•´ì•¼ ë˜ê¸° ë•Œë¬¸ì— ì½”ë“œëŸ‰ì´ ë§ì•„ì§€ê³  ì¤‘ë³µì´ ë°œìƒ ëœë‹¤.
    - ìë°”ì—ì„œëŠ” ë¦¬í”Œë ‰ì…˜ì—ì„œ ì œê³µí•˜ëŠ” ë™ì  í”„ë¡ì‹œ(Dynamic Proxy) ê¸°ë²•ì„ ì´ìš©í•´ì„œ í•´ê²°í•  ìˆ˜ ìˆë‹¤. (í›„ìˆ )

- í”„ë¡ì‹œ í´ë˜ìŠ¤ ìì²´ì— ë“¤ì–´ê°€ëŠ” ìì›ì´ ë§ë‹¤ë©´ ì„œë¹„ìŠ¤ë¡œë¶€í„°ì˜ ì‘ë‹µì´ ëŠ¦ì–´ì§ˆ ìˆ˜ ìˆë‹¤.

## **ì‹¤ë¬´ì—ì„œ ì°¾ì•„ë³´ëŠ” Proxy íŒ¨í„´**

### **Java**

- java.lang.reflect.Proxy
- java.rmi.* (ì›ê²© í”„ë¡ì‹œ ëª¨ë“ˆ)
- javax.ejb.EJB 
- javax.inject.Inject
- javax.persistence.PersistenceContext

#### **Dynamic Proxy**

ê°œë°œìê°€ ì§ì ‘ ë””ìì¸ íŒ¨í„´ìœ¼ë¡œì„œ í”„ë¡ì‹œ íŒ¨í„´ì„ êµ¬í˜„í•´ë„ ë˜ì§€ë§Œ, ìë°” JDKì—ì„œëŠ” ë³„ë„ë¡œ í”„ë¡ì‹œ ê°ì²´ êµ¬í˜„ ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤. ì´ë¥¼ ë™ì  í”„ë¡ì‹œ(Dynamic Proxy) ê¸°ë²•ì´ë¼ê³  ë¶ˆë¦¬ìš´ë‹¤.

ë™ì  í”„ë¡ì‹œëŠ” ê°œë°œìê°€ ì§ì ‘ ì¼ì¼íˆ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ ë„ì¤‘ java.lang.reflect.Proxy íŒ¨í‚¤ì§€ì—ì„œ ì œê³µí•´ì£¼ëŠ” APIë¥¼ ì´ìš©í•˜ì—¬ ë™ì ìœ¼ë¡œ í”„ë¡ì‹œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì–´ ë“±ë¡í•˜ëŠ” ë°©ë²•ìœ¼ë¡œì„œ, ìë°”ì˜ [Reflection APIVisit Website](https://inpa.tistory.com/entry/JAVA-%E2%98%95-%EB%88%84%EA%B5%AC%EB%82%98-%EC%89%BD%EA%B2%8C-%EB%B0%B0%EC%9A%B0%EB%8A%94-Reflection-API-%EC%82%AC%EC%9A%A9%EB%B2%95) ê¸°ë²•ì„ ì‘ìš©í•œ ì—°ì¥ì„ ì˜ ê°œë…ì´ë‹¤. ê·¸ë˜ì„œ ë³„ë„ì˜ í”„ë¡ì‹œ í´ë˜ìŠ¤ ì •ì˜ì—†ì´ ëŸ°íƒ€ì„ìœ¼ë¡œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ë™ì ìœ¼ë¡œ ìƒì„±í•´ ì´ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.

> Java Dynamic Proxy ìë°” í”„ë¡œê·¸ë˜ë°ì˜ ë””ìì¸ íŒ¨í„°ì¤‘ í•˜ë‚˜ì¸ í”„ë¡ì‹œ íŒ¨í„´ì€ ì´ˆê¸°í™” ì§€ì—°, ì ‘ê·¼ ì œì–´, ë¡œê¹…, ìºì‹± ë“±, ê¸°ì¡´ ëŒ€ìƒ ì›ë³¸ ê°ì²´ë¥¼ ìˆ˜ì • ì—†ì´ ì¶”ê°€ ë™ì‘ ê¸°ëŠ¥ë“¤ì„ ê°€ë¯¸í•˜ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•˜ëŠ”

```java
// ëŒ€ìƒ ê°ì²´ì™€ í”„ë¡ì‹œë¥¼ ë¬¶ëŠ” ì¸í„°í˜ì´ìŠ¤
interface Animal {
    void eat();
}

// í”„ë¡ì‹œë¥¼ ì ìš©í•  íƒ€ê²Ÿ ê°ì²´
class Tiger implements Animal{
    @Override
    public void eat() {
        System.out.println("í˜¸ë‘ì´ê°€ ìŒì‹ì„ ë¨¹ìŠµë‹ˆë‹¤.");
    }
}
```

```java
public class Client {
    public static void main(String[] arguments) {
		
        // newProxyInstance() ë©”ì„œë“œë¡œ ë™ì ìœ¼ë¡œ í”„ë¡ì‹œ ê°ì²´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
        Animal tigerProxy = (Animal) Proxy.newProxyInstance(
                Animal.class.getClassLoader(), // ëŒ€ìƒ ê°ì²´ì˜ ì¸í„°í˜ì´ìŠ¤ì˜ í´ë˜ìŠ¤ë¡œë”
                new Class[]{Animal.class}, // ëŒ€ìƒ ê°ì²´ì˜ ì¸í„°í˜ì´ìŠ¤
                new InvocationHandler() { // í”„ë¡ì‹œ í•¸ë“¤ëŸ¬
                    @Override
                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
                        Object target = new Tiger();

                        System.out.println("----eat ë©”ì„œë“œ í˜¸ì¶œ ì „----");

                        Object result = method.invoke(target, args); // íƒ€ê²Ÿ ë©”ì„œë“œ í˜¸ì¶œ

                        System.out.println("----eat ë©”ì„œë“œ í˜¸ì¶œ í›„----");

                        return result;
                    }
                }
        );

        tigerProxy.eat();
    }
}
```

---

### **Spring Framework**

#### **ìŠ¤í”„ë§ AOP**

ìŠ¤í”„ë§ í”„ë ˆì„ì›Œí¬ì—ì„œëŠ” ë‚´ë¶€ì ìœ¼ë¡œ í”„ë¡ì‹œ ê¸°ìˆ ì„ ì •ë§ ë§ì´ ì‚¬ìš©í•˜ê³  ìˆë‹¤. (AOP, JPA ë“±)

ìŠ¤í”„ë§ì—ì„œëŠ” Beanì„ ë“±ë¡í•  ë•Œ [SingletonVisit Website](https://inpa.tistory.com/entry/GOF-%F0%9F%92%A0-%EC%8B%B1%EA%B8%80%ED%86%A4Singleton-%ED%8C%A8%ED%84%B4-%EA%BC%BC%EA%BC%BC%ED%95%98%EA%B2%8C-%EC%95%8C%EC%95%84%EB%B3%B4%EC%9E%90)ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ Dynamic Proxy ê¸°ë²•ì„ ì´ìš©í•´ í”„ë¡ì‹œ ê°ì²´ë¥¼ Beanìœ¼ë¡œ ë“±ë¡í•œë‹¤. ë˜í•œ Beanìœ¼ë¡œ ë“±ë¡í•˜ë ¤ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ê°ì²´ê°€ Interfaceë¥¼ í•˜ë‚˜ë¼ë„ êµ¬í˜„í•˜ê³  ìˆìœ¼ë©´ JDKë¥¼ ì´ìš©í•˜ê³  Interfaceë¥¼ êµ¬í˜„í•˜ê³  ìˆì§€ ì•Šìœ¼ë©´ ë‚´ì¥ëœ CGLIB ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì´ìš©í•œë‹¤.

```java
@Service
public class GameService {
	public void startDame() {
    	System.out.println("ì´ ìë¦¬ì— ì˜¤ì‹  ì—¬ëŸ¬ë¶„ì„ ì§„ì‹¬ìœ¼ë¡œ í™˜ì˜í•©ë‹ˆë‹¤.");
    }
}
```

```java
@Aspect
@Comonent
public class PerfAspect {
	@Around("bean(gameService)")
	public void timestamp(ProceedingJoinPoint point) throws Throwable {
    	System.out.println("í”„ë¡ì‹œ ì‹¤í–‰ 1");
        
        point.proceed(); // ëŒ€ìƒ ê°ì²´ì˜ ì›ë³¸ ë©”ì„œë“œë¥¼ ì‹¤í–‰
        
        System.out.println("í”„ë¡ì‹œ ì‹¤í–‰ 2");
    }
}
```

---

### **JavaScript**

#### **Proxy / Reflect ê°ì²´**

ìë°”ì—ì„œë„ Proxy ê°ì²´ë¥¼ ë³„ë„ë¡œ ì§€ì›í•˜ë“¯ì´, ìë°”ìŠ¤í¬ë¦½íŠ¸ ì§„ì˜ì—ì„œë„ ë…ë¦½ì ì¸ Proxy ê°ì²´ê°€ ì¡´ì¬í•œë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œì˜ Proxy ê°ì²´ì˜ ì—­í• ì€ ëŒ€ìƒ ê°ì²´ì„ ê°ì‹¸ì„œ(wrapping), ì†ì„± ì¡°íšŒ, í• ë‹¹, ì—´ê±° ë° í•¨ìˆ˜ í˜¸ì¶œ ë“± ì—¬ëŸ¬ ê¸°ë³¸ ë™ì‘ì„ ê°€ë¡œì±„(trap) íŠ¹ë³„í•œ ë‹¤ë¥¸ ë™ì‘ì„ ê°€ë¯¸ì‹œí‚¤ëŠ” ëŒ€ë¦¬ì ì—­í• ì„ í•œë‹¤. ëŒ€ìƒ ê°ì²´ëŠ” Object, Array ë“± ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ëª¨ë“  ìë£Œí˜•ì´ ëŒ€ìƒì´ ë  ìˆ˜ ìˆë‹¤.

> JavaScript Proxy ê°ì²´ í”„ë¡ì‹œ(Proxy)ì˜ ì‚¬ì „ì  ëœ»ì€ 'ëŒ€ë¦¬ì¸', 'ëŒ€ë¦¬'ë¼ëŠ” ëœ»ì´ë‹¤. ì„œë²„ë¥¼ ë‹¤ë¤„ë³¸ ë…ìë¶„ë“¤ì´ë¼ë©´ í”„ë¡ì‹œ ì„œë²„ì— ëŒ€í•´ ì§ˆë¦¬ë„ë¡ ë“¤ì–´ë´¤ì„ ê²ƒì´ë‹¤. í”„ë¡ì‹œ ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ì™€ ë³¸ ì„œë²„

```js
let obj = {
    name: 'í™ê¸¸ë™',
    print: function () {
        console.log(`My Name is ${this.name}`);
    },
};

// print í•¨ìˆ˜ë¥¼ í”„ë¡ì‹œë¡œ ê°ì‹¸ê¸°
obj.print = new Proxy(obj.print, {
    apply(target, thisArg, args) {
        console.log('ë©”ì„œë“œ ì‹¤í–‰í•  ë•Œ ì¤‘ê°„ì— ê°€ë¡œì±„ì–´ ë¡œì§ ì‹œí–‰');

        console.log('target: ', target); // ëŒ€ìƒ í•¨ìˆ˜
        console.log('thisArg: ', thisArg); // thisì˜ ê°’
        console.log('args: ', args); // ë§¤ê°œë³€ìˆ˜ ëª©ë¡ (ë°°ì—´)

        console.log('ì´ë¦„ ë°”ê¿” ë²„ë¦¬ê¸° ~');
        thisArg.name = 'ì„êº½ì •';

        Reflect.apply(target, thisArg, args); // ëŒ€ìƒ ì›ë³¸ í•¨ìˆ˜ ì‹¤í–‰
    },
});

obj.print();
```

[![javascript-Proxy-Reflect](img/proxy-js-print.png)](img/proxy-js-print.png)

ì¶œì²˜: [https://inpa.tistory.com/entry/GOF-ğŸ’ -í”„ë¡ì‹œProxy-íŒ¨í„´-ì œëŒ€ë¡œ-ë°°ì›Œë³´ì](https://inpa.tistory.com/entry/GOF-%F0%9F%92%A0-%ED%94%84%EB%A1%9D%EC%8B%9CProxy-%ED%8C%A8%ED%84%B4-%EC%A0%9C%EB%8C%80%EB%A1%9C-%EB%B0%B0%EC%9B%8C%EB%B3%B4%EC%9E%90) [Inpa Dev ğŸ‘¨â€ğŸ’»:í‹°ìŠ¤í† ë¦¬]